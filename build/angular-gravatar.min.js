(function(){var a;a=function(a){return["gravatarService",function(b){var c;return c=function(a,b){var c,d,e;d={};for(c in b)e=b[c],0===c.indexOf(a)&&(c=c.substr(a.length).toLowerCase(),c.length>0&&(d[c]=e));return d},{restrict:"A",link:function(d,e,f){var g,h,i,j;g=a?"gravatarSrcOnce":"gravatarSrc",h=f[g],delete f[g],i=c("gravatar",f),j=d.$watch(h,function(c){if(a){if(null==c)return;j()}e.attr("src",b.url(c,i,f.protocol))})}}}]},angular.module("ui.gravatar",["md5"]).provider("gravatarService",function(){var a,b,c;return b=this,a=/^[0-9a-f]{32}$/i,c=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(""+b+"="+encodeURIComponent(d));return c.join("&")},this.defaults={},this.secure=!1,this.$get=["md5",function(d){return{url:function(e,f,g){var h,i,j;return null==e&&(e=""),null==f&&(f={}),g=g?g+"://www":"//www",f=angular.extend(angular.copy(b.defaults),f),j=b.secure?"https://secure":g,e=a.test(e)?e:d(e),i=[j,".gravatar.com/avatar/",e],h=c(f),h.length>0&&i.push("?"+h),i.join("")}}}],this}).directive("gravatarSrc",a()).directive("gravatarSrcOnce",a(!0))}).call(this);